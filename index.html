<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Rock, paper, scissors!</title>
</head>

<body>
    <script>
        console.log(alert("Let's play a game of rock, paper, scissors!\nBest out of 5 wins!"));

        function getUserChoice() {
            let promptChoice = prompt(
                "Please choose one:", "rock, paper or scissors");

            let userChoice = promptChoice;
            userChoice = userChoice.toLowerCase().trim();

            function checkSpelling() {
                if (userChoice !== "rock" &&
                    userChoice !== "paper" &&
                    userChoice !== "scissors") {
                    alert(`Something went wrong... did you spell your choice correctly?
                  Remember, the options are 'rock', 'paper' or 'scissors'
                  Try again!`);
                    return true;
                }
            }

            if (checkSpelling()) {
                getUserChoice();
            } else {
                return userChoice;
            }
        }

        function getComputerChoice() {
            let computerChoice = Math.floor(Math.random() * 3);

            switch (computerChoice) {
                case 0:
                    return "rock";
                    break;

                case 1:
                    return "paper";
                    break;

                case 2:
                    return "scissors";
                    break;
            }
        }

        let userScore = 0;
        let computerScore = 0;

        function getWinnerForEachRound(userSelection, computerSelection) {
            if (userSelection == computerSelection) {
                return "Oh no, it's a tie!";

            } else if (userSelection === "rock" && computerSelection === "paper") {
                computerScore += 1;
                return "Oh no, you Lose! Paper beats Rock";

            } else if (userSelection === "rock" && computerSelection === "scissors") {
                userScore += 1;
                return "You Won! Rock beats scissors";

            } else if (userSelection === "scissors" && computerSelection === "paper") {
                userScore += 1;
                return "You Won! Scissors beats paper";

            } else if (userSelection === "scissors" && computerSelection === "rock") {
                computerScore += 1;
                return "Oh no, you Lose! Rock beats scissors";

            } else if (userSelection === "paper" && computerSelection === "rock") {
                userScore += 1;
                return "You Won! Paper beats rock";

            } else if (userSelection === "paper" && computerSelection === "scissors") {
                computerScore += 1;
                return "Oh no, you Lose! Scissors beats paper";
            }
        }

        function playGame() {
            for (let i = 0; i < 5; i++) {

                let userSelection = getUserChoice();
                console.log(`You've chosen ${userSelection}`);

                let computerSelection = getComputerChoice();
                console.log(`The computer chose ${computerSelection}`);

                console.log(getWinnerForEachRound(userSelection, computerSelection));
                console.log(`The score is:\
                    You: ${userScore}\nComputer: ${computerScore}`);
            }

            if (userScore > computerScore) {
                alert("Congratulations! You won the game :)\ Play again? Refresh me!")
            } else if (userScore < computerScore) {
                alert("The computer won! Best luck next time :(\ Refresh me for a re-match.")
            } else {
                alert("Seems it was a tie! No one won.\ Play again? Refresh me!")
            }
        }

        playGame();
    </script>
</body>

</html>